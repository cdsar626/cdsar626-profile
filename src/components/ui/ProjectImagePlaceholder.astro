---
export interface Props {
  title: string;
  className?: string;
}

const { title, className = "" } = Astro.props;

// Generate a consistent color based on the title
const colors = [
  { bg: '#3b82f6', accent: '#1d4ed8' }, // Blue
  { bg: '#10b981', accent: '#047857' }, // Green
  { bg: '#f59e0b', accent: '#d97706' }, // Amber
  { bg: '#ef4444', accent: '#dc2626' }, // Red
  { bg: '#8b5cf6', accent: '#7c3aed' }, // Violet
  { bg: '#06b6d4', accent: '#0891b2' }, // Cyan
];

const colorIndex = title.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0) % colors.length;
const color = colors[colorIndex];

// Create initials from title
const initials = title
  .split(' ')
  .map(word => word.charAt(0))
  .join('')
  .substring(0, 2)
  .toUpperCase();
---

<div class={`project-placeholder ${className}`} data-title={title}>
  <svg width="400" height="225" viewBox="0 0 400 225" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="400" height="225" fill="#f8fafc"/>
    <rect x="20" y="20" width="360" height="185" rx="8" fill={color.bg} opacity="0.1" stroke={color.bg} stroke-width="2" opacity="0.3"/>
    
    <!-- Background pattern -->
    <defs>
      <pattern id={`pattern-${colorIndex}`} x="0" y="0" width="40" height="40" patternUnits="userSpaceOnUse">
        <circle cx="20" cy="20" r="2" fill={color.bg} opacity="0.1"/>
      </pattern>
    </defs>
    <rect x="20" y="20" width="360" height="185" fill={`url(#pattern-${colorIndex})`}/>
    
    <!-- Main content area -->
    <rect x="40" y="40" width="320" height="30" rx="4" fill={color.bg} opacity="0.8"/>
    
    <!-- Project icon/initials -->
    <circle cx="200" cy="130" r="30" fill={color.bg} opacity="0.2"/>
    <circle cx="200" cy="130" r="25" fill={color.bg}/>
    <text x="200" y="138" text-anchor="middle" fill="white" font-family="system-ui" font-size="18" font-weight="600">{initials}</text>
    
    <!-- Decorative elements -->
    <rect x="60" y="170" width="80" height="4" rx="2" fill={color.bg} opacity="0.3"/>
    <rect x="160" y="170" width="60" height="4" rx="2" fill={color.bg} opacity="0.3"/>
    <rect x="240" y="170" width="100" height="4" rx="2" fill={color.bg} opacity="0.3"/>
    
    <text x="200" y="195" text-anchor="middle" fill="#64748b" font-family="system-ui" font-size="12" font-weight="500">Project Image</text>
  </svg>
</div>

<style>
  .project-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--color-gray-50);
  }
  
  .project-placeholder svg {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
</style>